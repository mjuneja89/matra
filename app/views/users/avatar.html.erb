<html>

<head>	
  
  <title>matra architects: upload</title>

  <script type="text/javascript">
 
 $(document).ready(function(){
 
 $("#avatarbtn").click(function(){
  
  $("#avatarfield").click(); 

 });

});

</script>


<script type="text/javascript">
$(document).ready(function(){
    var box = $("#avatarbox");
    var preview = $("#avatarbox img");
    var upload = $('#asli')

    $("#avatarfield").change(function(event){
       var input = $(event.currentTarget);
       var file = input[0].files[0];
       var reader = new FileReader();
       reader.onload = function(e){
           image_base64 = e.target.result;
           preview.attr("src", image_base64);
       };
       reader.readAsDataURL(file);
       box.show();
       upload.show();
    });   
});
</script>

</head>

<body>

<div class="container-fluid" style="margin-top: 6%">

<div class="row">
	<div class="col-sm-6 col-sm-offset-3" style="text-align: center">
        
        <h3 style="color: #7f7f7f">upload a profile picture</h3>

        <div id="avatarbox">
          <img class="fitpreview" />
        </div>

		<%= form_for(@user, url: user_updateavatar_path(@user)) do |f| %>
          
          <%= f.file_field :avatar, :id => "avatarfield" %>
          
          <div id="avatarbtn" style="text-align: center">
            <a href="#" id="chooseavatar" class="btn matrabtn">add profile picture</a>   
          </div>
          
          <%= f.submit "update", :class => "matrabtn", :id => "asli", :style => "display: none" %>

		<% end %>
	</div>
</div>

</div>


</body>

</html>
